# User Stories（MVP → 可擴充）

本文件把 `MVP-SPEC.md` 轉成可執行的 user stories（含驗收條件），方便你下一步拆工、估時與做 API/DB 設計。

## Epic 0：系統建置與基本設定（MVP）
### US-000 建立學校（Organization）
作為系統管理者，我想要建立一個學校/單位（organization），以便在同一套系統服務多個學校（多租戶）。
- 驗收：可建立 organization，取得 `organization_id`
- 驗收：同一個 `external_id` 在不同 organization 可重複存在

### US-001 建立館別/位置（Locations）
作為館員，我想要建立館別/分區/書架位置，以便冊能被正確上架與盤點。
- 驗收：可新增/編輯/停用 location
- 驗收：冊必須綁定一個 location

### US-002 設定借閱政策（Circulation Policies）
作為館員，我想要設定學生/教師的借閱政策（借期、上限、續借、預約），以便系統自動計算到期日與限制。
- 驗收：至少能建立兩套政策（student/teacher）
- 驗收：借出時計算 `due_at` 使用當下政策（政策快照/版本化可列為擴充）

## Epic 1：使用者管理（MVP）
### US-010 匯入使用者名冊（CSV）
作為館員，我想要用 CSV 批次匯入學生/教師名冊，以便每學期快速更新帳號。
- 驗收：支援新增與更新（以 `external_id` 作為唯一鍵）
- 驗收：匯入前有預覽與錯誤列出（列號/欄位/原因）
- 驗收：可批次停用離校/畢業使用者

### US-011 查詢與篩選使用者
作為館員，我想要以姓名/學號/班級篩選使用者，以便快速進行借還作業。
- 驗收：可搜尋 `external_id`、`name`、`org_unit`

## Epic 2：書目與館藏（MVP）
### US-020 新增/編輯書目（Bibliographic Record）
作為館員，我想要新增/編輯書目資料，以便館藏能被搜尋與管理。
- 驗收：至少支援 `title`、`creators`、`isbn`、`classification`、`subjects`
- 驗收：必填欄位缺漏時有明確錯誤訊息

### US-021 為同一書目新增多冊（Item Copies）
作為館員，我想要在同一書目下新增多冊（每冊條碼與索書號），以便做借還與盤點。
- 驗收：`barcode` 在同 organization 內唯一
- 驗收：新增冊時可設定 `location` 與 `status=available`

### US-022 批次匯入書目/冊（擴充）
作為館員，我想要用 CSV/ISBN 批次建立書目與冊，以便降低大量建檔成本。
- 驗收：可在匯入過程做重複偵測（ISBN/條碼）

## Epic 3：OPAC 檢索與瀏覽（MVP）
### US-030 搜尋館藏（關鍵字/欄位）
作為學生/教師，我想要用關鍵字搜尋書名/作者/ISBN/主題，以便找到可借的書。
- 驗收：支援模糊比對（容錯；例如大小寫/空白/部分匹配）
- 驗收：結果顯示是否有可借冊（available count）

### US-031 瀏覽入口（擴充）
作為小學生，我想要用分區/主題/熱門清單瀏覽，以便不靠精準關鍵字也能找書。
- 驗收：至少提供「熱門書」與「分類/分區」瀏覽

## Epic 4：流通（MVP）
### US-040 借出（Checkout）
作為館員，我想要掃描讀者條碼與冊條碼完成借出，以便尖峰時段快速處理。
- 驗收：冊必須為 `available` 才能借出
- 驗收：借出後冊狀態變為 `checked_out`，並建立 `loan`（含 `due_at`）
- 驗收：同一冊同一時間只能有一筆未歸還借閱

### US-041 歸還（Check-in）
作為館員，我想要掃描冊條碼完成歸還，以便更新狀態並觸發預約流程。
- 驗收：歸還後寫入 `returned_at`，冊狀態回到 `available` 或 `on_hold`
- 驗收：若存在預約隊列，歸還會把冊轉成 `on_hold`

### US-042 續借（Renewal）
作為館員/讀者，我想要續借以延長到期日，以便完成閱讀。
- 驗收：超過續借上限不可續借
- 驗收：若存在他人預約（排隊中），不可續借（或改為縮短續借；列為擴充）

### US-043 預約（Hold）
作為讀者，我想要預約某本書，以便在有冊可借時被保留給我。
- 驗收：可對「書目」建立預約並進入隊列
- 驗收：到書後狀態變 `ready` 並有 `ready_until`

### US-044 逾期清單（Overdue List）
作為館員，我想要看到逾期清單，以便提醒與停權處理。
- 驗收：可依日期/班級篩選逾期清單
- 驗收：可匯出 CSV

### US-045 遺失/修復/報廢（Item Exceptions）
作為館員，我想要把冊標記為遺失/修復中/報廢，以便反映真實狀態並保持可追溯。
- 驗收：可將冊狀態改為 `lost/repair/withdrawn`
- 驗收：此動作寫入稽核紀錄

## Epic 5：報表與匯出（MVP）
### US-050 熱門書與借閱量
作為館員，我想要看到熱門書與期間借閱量，以便做閱讀推廣與補書決策。
- 驗收：可選期間（日/週/月/學期）
- 驗收：可匯出 CSV

### US-051 零借閱清單（擴充）
作為館員，我想要看到零借閱清單，以便做汰舊或館藏調整。
- 驗收：可設定期間與排除類型（參考書/典藏）

## Epic 6：稽核與隱私（MVP）
### US-060 稽核事件（Audit Events）
作為系統管理者，我想要查看關鍵事件（借還/刪除/匯入），以便追溯問題。
- 驗收：借出、歸還、改狀態、匯入都會產生 audit event
- 驗收：可依時間/操作者/事件類型查詢

### US-061 借閱歷史保存期限（擴充）
作為系統管理者，我想要設定借閱歷史保存期限，以便符合最小保存與校內政策。
- 驗收：到期後可刪除或彙總（彙總策略另列）

