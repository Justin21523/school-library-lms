# 文獻 G 流通作業（Circulation）摘要

> 說明：本文件為「摘要版」（去除匯出對話資訊），用於快速轉成規格；若需要完整脈絡與來源線索，請對照同資料夾內較完整的匯出文獻。

## 1) 核心概念與名詞（中英文對照表）
| 術語 (Term) | 一句話定義 | 同義詞/常見誤用 |
| --- | --- | --- |
| 流通（Circulation） | 圖書借還、續借、預約、逾期等「館藏進出」作業的總稱 | 誤把「流通」只當成借還；其實也包含預約與逾期處理 |
| 借出（Checkout） | 將某一冊（Item/Copy）登記為被某位讀者借走 | 誤以為借的是書目（Bibliographic record）而非冊（Item） |
| 歸還（Check-in / Return） | 將借出冊登記回館，並觸發後續狀態（在架/保留/轉運） | 只改借閱紀錄卻忘了更新冊狀態 |
| 續借（Renewal） | 延長借閱到期日的操作 | 未檢查是否已有預約就放行續借 |
| 借期（Loan Period） | 一次借出的可借天數 | 忽略學校假日/寒暑假，導致到期日不合理 |
| 到期日（Due Date） | 借閱必須歸還的日期/時間 | 僅用日期不含時區與截止時間，造成爭議 |
| 逾期（Overdue） | 超過到期日仍未歸還 | 把逾期「罰款」當必要；中小學常改用停權/提醒 |
| 借閱政策（Circulation Policy） | 對不同角色或館藏類型設定借期、上限、續借等規則 | 規則散落在程式裡，沒有可設定/可追蹤的政策版本 |
| 預約（Hold / Reservation） | 讀者排隊等候某書目或某冊可借的機制 | 混用「預約」與「到館保留」，應區分排隊與取書期限 |
| 保留期限（Pickup Window） | 到書後為讀者保留的期限 | 未設期限導致書長期卡在保留狀態 |
| 冊狀態（Item Status） | 表示某冊目前是否可借、在哪裡、是否遺失等 | 狀態過多造成維運困難；狀態過少又無法處理例外 |
| 阻擋（Block） | 因逾期/遺失/超額等原因暫停借閱權 | 直接刪帳號或刪借閱紀錄，造成不可追溯 |

## 2) 關鍵理論與必讀脈絡（為何重要）
- **書目 vs 冊分離**：借還作用在冊；報表與檢索通常以書目為主，能避免多冊管理混亂。
- **狀態機（State Machine）思維**：冊狀態、借閱狀態、預約狀態要可列舉、可推導、可稽核。
- **政策驅動（Policy-driven）**：借期/上限/續借等不應寫死；校務規則常變，需可設定與留痕。
- **尖峰操作效率**：中小學常在下課或晨讀集中借還，流程必須少步驟、可容錯。
- **例外處理**：遺失/破損/代借/團體借閱等不是常態，但若無流程會讓資料失真。

## 3) 標準/規範/權威資源（可搜尋線索）
> 以下提供「可被搜尋驗證」的線索，後續可再精準引用條文與版本。
- IFLA（國際圖書館協會聯盟）與公共/學校圖書館服務指引（搜尋：`IFLA school library guidelines circulation policy`）
- ALA（American Library Association）關於借閱政策與讀者隱私的指引（搜尋：`ALA library privacy circulation records`）
- SIP2（Standard Interchange Protocol）與自助借還設備常見介接（搜尋：`SIP2 library self-check protocol`）
- ISO 28560（RFID in libraries）若考慮 RFID（搜尋：`ISO 28560 RFID libraries`）

## 4) 中小學場域的簡化策略（做/不做/為什麼）
- **先做**：借出/歸還/續借/預約/逾期清單/遺失與報廢（最低限度可營運）。
- **先不做**：複雜罰款計算、跨館互借、館際合作介接（成本高、情境少）。
- **政策先用兩套**：學生/教師各一套預設政策；後續再加「館藏類型」差異（繪本、小說、教具）。
- **通知先降階**：MVP 可先產出報表與名單（由老師/館員人工通知），再做 Email/SMS/LINE。
- **狀態先少而精**：`available/checked_out/on_hold/lost/withdrawn/repair` 足以覆蓋大多數情境。

## 5) 對應到系統的資料欄位建議（至少 8 欄）
> 建議以 `DATA-DICTIONARY.md` 為準；此處列出流通必備欄位群。
| 欄位名 | 型別 | 必填 | 說明 | 例子 |
| --- | --- | --- | --- | --- |
| loans.id | string | Y | 借閱紀錄 ID | `l_...` |
| loans.item_id | string | Y | 借出冊 ID | `i_...` |
| loans.user_id | string | Y | 借閱者 ID | `u_...` |
| loans.checked_out_at | datetime | Y | 借出時間 | `2025-12-01T08:10:00Z` |
| loans.due_at | datetime | Y | 到期日 | `2025-12-15T23:59:59Z` |
| loans.returned_at | datetime | N | 歸還時間 | `2025-12-10T10:00:00Z` |
| item_copies.status | enum | Y | 冊狀態 | `checked_out` |
| holds.status | enum | Y | 預約狀態 | `queued` |
| circulation_policies.loan_days | int | Y | 借期天數 | `14` |

## 6) 對應到系統的功能設計建議（至少 8 條）
- 需求：借還要快 → 功能：掃讀者條碼 + 掃冊條碼一鍵借出 → 為何：尖峰時段減少排隊與錯誤。
- 需求：避免重複借出 → 功能：借出前檢查冊狀態必須為 `available` → 為何：狀態一致性是所有報表與盤點的基礎。
- 需求：到期日一致 → 功能：以政策計算 `due_at`（含截止時間）→ 為何：降低爭議、便於自動化提醒。
- 需求：續借不搶走他人機會 → 功能：若已有他人預約則禁止續借（或縮短續借）→ 為何：公平與可預期。
- 需求：還書後自動處理預約 → 功能：歸還時若存在預約隊列，將冊轉 `on_hold` 並產生取書名單 → 為何：減少館員手動調度。
- 需求：處理遺失/破損 → 功能：將冊標記 `lost/repair`，並保留借閱/異動紀錄 → 為何：可追溯且方便後續補書或報廢。
- 需求：政策變更不影響既有借閱 → 功能：借出時將關鍵政策參數寫入借閱紀錄（快照）→ 為何：避免「政策改了，舊借閱被重算」。
- 需求：老師兼任好上手 → 功能：提供「今日待處理」儀表：逾期、到館保留、遺失待處理 → 為何：把注意力集中在需要人處理的事件。

## 7) 常見坑與避雷清單（至少 8 條）
- 只更新 `loans` 不更新 `item_copies.status`，導致同一本書同時顯示可借/借出。
- 條碼不唯一或可重複使用，後續盤點與追溯會失真。
- 沒有定義「還書觸發預約」規則，造成到館書卡住或被插隊。
- 到期日忽略時區/學校行事曆（寒暑假），造成大量不合理逾期。
- 政策直接寫死在程式邏輯，學校改規則就得改版。
- 缺少稽核紀錄（誰把冊改成遺失/報廢），容易引發責任爭議。
- 逾期處理過度複雜（罰款/多套規則）反而讓館員不用系統、改用紙本。
- 自助借書若無風控（冒借/重複掃描/離線）會放大遺失與帳務混亂。

## 8) 可交付給 AI 小助理的任務清單（至少 10 條）
1. 產出「學生/教師」兩套借閱政策預設模板（含可調參數）。
2. 設計冊狀態機與預約狀態機（狀態、轉移、觸發條件）。
3. 整理台灣中小學常見借閱規則案例（可搜尋線索 + 摘要）。
4. 產出借還 UX 線框（掃碼優先、錯誤回饋、撤銷/更正流程）。
5. 定義「歸還觸發預約」的處理流程（通知、保留期限、逾期釋出）。
6. 設計逾期處理最小方案（名單匯出、停權規則、提醒節點）。
7. 規劃遺失/破損處理流程（資料保留、報廢、補書建議欄位）。
8. 設計批次盤點流程與差異報表欄位。
9. 撰寫操作 SOP（館員 10 分鐘上手版）。
10. 針對「自助借書」做風險清單與最小控管建議。

## 本章關鍵搜尋詞（中英）
流通、借出、歸還、續借、預約、到館保留、逾期、借閱政策、冊狀態、條碼、讀者權限、稽核紀錄、Circulation、Checkout、Check-in、Renewal、Hold、Due date、Overdue
